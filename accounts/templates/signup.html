{% load static %}
{% load widget_tweaks %}

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>sign up</title>
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
    <!-- <link rel="stylesheet" href="https://unpkg.com/@themesberg/flowbite@1.3.0/dist/flowbite.min.css" /> -->
</head>

<style>
    #id_username{
        outline: none;
    }
</style>
<body class="flex items-center justify-center h-screen content-center bg-gray-100">
    <div class="flex items-center justify-center min-h-screen p-6">
        <div class="container max-w-screen-lg mx-auto items-center ">
            <div>
                <div class="p-4 px-4 bg-white rounded shadow-lg md:p-8  lg:mt-auto md:mt-32 mt-144 sm:mt-155">
                    <form class="grid grid-cols-1 gap-4  gap-y-2 lg:grid-cols-3 md:grid-cols-2 text-sm" id="personForm" method="post" data-cities-url="{% url 'ajax_load_cities' %}" data-area-url="{% url 'ajax_load_area' %}" action="{%url 'signup'%}" novalidate>

                        {% csrf_token %}

                        <div class="text-gray-600 md:shrink-0">
                            <p class="pb-1 text-4xl font-medium">Sign up to <span class="text-red-500"> Rental Appliances</span></p>
                            <p class="text-gray-600">Please fill out all the fields.</p>
                            <img src="{% static 'assets/images/sign_up.png'%}" class="object-cover w-full mt-6 h-50 md:h-auto md:w-50" />
                        </div>

                        <div class="lg:col-span-2">
                            <div class="grid grid-cols-1 gap-4 text-sm gap-y-2 md:grid-cols-6 relative">
                                <div class="md:col-span-3">
                                    <label for="full_name">First Name</label>
                                    {{user_fm.first_name| attr:'placeholder:First Name' |add_class:'w-full h-10 px-4 mt-1 border rounded bg-gray-50 focus:outline-none'}}
                                    <p class="text-red-500 text-xs">{{user_fm.first_name.errors|striptags}}</p>
                                </div>
                                <div class="md:col-span-3">
                                    <label for="full_name">Last Name</label>
                                    {{user_fm.last_name| attr:'placeholder:Last Name' |add_class:'w-full h-10 px-4 mt-1 border rounded bg-gray-50'}}
                                    <p class="text-red-500 text-xs italic">{{user_fm.last_name.errors|striptags}}</p>
                                </div>
                                <div class="md:col-span-6">
                                    <label for="full_name">User Name</label>
                                    {{user_fm.username| attr:'placeholder:Username' |add_class:'w-full h-10 px-4 mt-1 border rounded bg-gray-50 focus:outline-none'}}
                                    <p class="text-red-500 text-xs">{{user_fm.username.errors|striptags}}</p>
                                </div>
                                <div class="md:col-span-6">
                                    <label for="email">Email Address</label>
                                    {{user_fm.email| attr:'placeholder:Email' |add_class:'w-full h-10 px-4 mt-1 border rounded bg-gray-50 focus:outline-none'}}
                                    {%if messages%}
                                        {%for message in messages %}
                                            {% if message.tags == 'warning' %}
                                            <p class="text-red-500 text-xs ">{{message}}</p>
                                            {%endif%}
                                        {%endfor%}
                                    {%endif%}
                                    <p class="text-red-500 text-xs">{{user_fm.email.errors|striptags}}</p>

                                </div>

                                <div class="md:col-span-6 lg:col-span-3">
                                    <label for="" class="block">Password</label>
                                    {{user_fm.password1| attr:'placeholder:Password' |add_class:'w-full h-10 px-4 mt-1 border focus:outline-none rounded bg-gray-50 focus:outline-none'}}
                                    <p class="text-red-500 text-xs ">{{user_fm.password1.errors|striptags}}</p>
                                </div>
                                <div class="md:col-span-6 lg:col-span-3">
                                    <label for="" class="block">Confirm Password</label>
                                    {{user_fm.password2| attr:'placeholder:Confirm Password' |add_class:'w-full h-10 px-4 mt-1 border focus:outline-none rounded bg-gray-50 focus:outline-none'}}
                                    <p class="text-red-500 text-xs ">{{user_fm.password2.errors|striptags}}</p>
                                </div>
                                <div class="md:col-span-6 ">
                                    <label>Company Name</label>
                                    {{profileForm.company_name| attr:'placeholder:Company Name' |add_class:'w-full h-10 px-4 mt-1 border focus:outline-none rounded bg-gray-50 focus:outline-none'}}
                                    {%if messages%}
                                        {%for message in messages %}
                                            {%if message.tags == 'info'%}
                                                <p class="text-red-500 text-xs ">{{message}}</p>
                                            {%endif%}
                                        {%endfor%}
                                    {%endif%}
                                    <p class="text-red-500 text-xs ">{{profileForm.company_name.errors|striptags}}</p>
                                </div>
                                
                                <div class="md:col-span-2 mt-3">
                                    <label for="" class="mr-1">State</label>
                                    {{profileForm.state| attr:'placeholder:Company Name' |add_class:'block mt-1 md:mt-0 md:inline rounded border w-full md:w-24 focus:outline-none py-1 bg-gray-50'}}
                                    <p class="text-red-500 text-xs ">{{profileForm.state.errors|striptags}}</p>
                                </div>
                                <div class="md:col-span-2 mt-3">
                                    <label for="" class="mr-1">City</label>
                                    {{profileForm.city| attr:'placeholder:Company Name' |add_class:'block mt-1 md:mt-0 md:inline rounded w-full md:w-24 border focus:outline-none py-1 bg-gray-50'}}
                                    <p class="text-red-500 text-xs ">{{profileForm.city.errors|striptags}}</p>
                                </div>
                                <div class="md:col-span-2 mt-3">
                                    <label for="" class="mr-1">Area</label>
                                    {{profileForm.area| attr:'placeholder:Company Name' |add_class:'block mt-1 md:mt-0 md:inline rounded w-full md:w-24 border focus:outline-none py-1 bg-gray-50'}}
                                    <p class="text-red-500 text-xs ">{{profileForm.area.errors|striptags}}</p>
                                </div>

                                <div class="md:col-span-6 mt-2">
                                    
                                    <label for="" class="">Address</label>
                                    {{profileForm.company_address| attr:'placeholder:Company Address' |add_class:'w-full px-3 pt-2 h-20 resize-none mt-1 border focus:outline-none rounded bg-gray-50 outline-red-100'}}
                                    <p class="text-red-500 text-xs ">{{profileForm.company_address.errors|striptags}}</p>
                                </div>

                                
                                <div class="md:col-span-6 mt-2">
                                    <a href="{%url 'signin'%}"
                                        class="text-sm float-right text-gray-600 hover:underline dark:text-blue-500 ">Already Have An Account..?</a>
                                </div>
                            </div>
                        </div>

                        <div class="text-right md:col-span-5 mt-2">
                            <div class="inline-flex items-end">
                                <button class="px-4 py-2 font-bold text-white bg-gray-600 rounded hover:bg-gray-500" type="submit">Submit</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


<!-- modal -->
{%if registered%}
<div
    class="fixed inset-0 w-full h-screen z-20 bg-black bg-opacity-50 duration-300 overflow-y-auto"
    x-show="showModal2"
    x-transition:enter="transition duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition duration-300"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
>
    <div class="relative sm:w-3/4 md:w-1/2 lg:w-1/3 mx-2 sm:mx-auto my-10 opacity-100">
    <div
        class="relative bg-white shadow-lg rounded-lg text-gray-900 z-20"
        @click.away="showModal2 = false"
        x-show="showModal2"
        x-transition:enter="transition transform duration-300"
        x-transition:enter-start="scale-0"
        x-transition:enter-end="scale-100"
        x-transition:leave="transition transform duration-300"
        x-transition:leave-start="scale-100"
        x-transition:leave-end="scale-0"
    >
        <header class="flex flex-col justify-center items-center p-3 text-green-600">
        <div class="flex justify-center w-20 h-20 border-4 border-green-600 rounded-full mb-4">
            <svg class="fill-current w-14" viewBox="0 0 20 20">
            <path
                d="M7.629,14.566c0.125,0.125,0.291,0.188,0.456,0.188c0.164,0,0.329-0.062,0.456-0.188l8.219-8.221c0.252-0.252,0.252-0.659,0-0.911c-0.252-0.252-0.659-0.252-0.911,0l-7.764,7.763L4.152,9.267c-0.252-0.251-0.66-0.251-0.911,0c-0.252,0.252-0.252,0.66,0,0.911L7.629,14.566z"
            ></path>
            </svg>
        </div>
        <h2 class="font-semibold text-3xl">Success</h2>
        </header>
        <main class="p-3 text-center">
        <p>
            Your recoord saved successfully after check your details we will send response to you
        </p>
        </main>
        <footer class="flex justify-center bg-transparent">
        <a
            class="bg-green-600 font-semibold text-white text-center py-3 w-full rounded-b-md hover:bg-green-700 focus:outline-none focus:ring shadow-lg hover:shadow-none transition-all duration-300"
            @click="showModal2 = false" href="{%url 'home'%}"
        >
            Go Back To Home Page
        </a>
        </footer>
    </div>
    </div>
</div>
{%endif%}



<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<!-- load cities and area -->
<script>
    $("#id_state").change(function () {
        var url = $("#personForm").attr("data-cities-url");  // get the url of the `load_cities` view
        var stateId = $(this).val();  // get the selected country ID from the HTML input
        
        $.ajax({                       // initialize an AJAX request
        url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
            'state': stateId       // add the country id to the GET parameters
        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
            
            $("#id_city").html(data);  // replace the contents of the city input with the data that came from the server
        }
    });
    
});
$("#id_city").change(function () {
    var url = $("#personForm").attr("data-area-url");  // get the url of the `load_cities` view
    var cityId = $(this).val();  // get the selected country ID from the HTML input
    $.ajax({                       // initialize an AJAX request
    url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
    data: {
        'city': cityId       // add the country id to the GET parameters
    },
    success: function (data) {   // `data` is the return of the `load_cities` view function
        
        console.log(data)
        $("#id_area").html(data);  // replace the contents of the city input with the data that came from the server
    }
    });

});
    </script>
</body>
</html>
