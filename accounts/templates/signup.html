{%load static%}
{%load widget_tweaks%}

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>sign up</title>
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
</head>


<body class="flex items-center justify-center h-screen  bg-gray-100">
    <div class="flex items-center justify-center min-h-screen p-6">
        <div class="container max-w-screen-lg mx-auto items-center ">
            <div>
                <div class="p-4 px-4 bg-white rounded shadow-lg md:p-8  lg:mt-auto md:mt-32 mt-144 sm:mt-155">
                    <form class="grid grid-cols-1 gap-4  gap-y-2 lg:grid-cols-3 md:grid-cols-2 text-sm" id="personForm" method="post" data-cities-url="{% url 'ajax_load_cities' %}" data-area-url="{% url 'ajax_load_area' %}" action="{%url 'signup'%}" novalidate>

                        {% csrf_token %}

                        <div class="text-gray-600 md:shrink-0">
                            <p class="pb-1 text-4xl font-medium">Sign up to <span class="text-red-500"> Rental Appliances</span></p>
                            <p class="text-gray-600">Please fill out all the fields.</p>
                            <img src="{% static 'assets/images/sign_up.png'%}" class="object-cover w-full mt-6 h-50 md:h-auto md:w-50" />
                        </div>

                        <div class="lg:col-span-2">
                            <div class="grid grid-cols-1 gap-4 text-sm gap-y-2 md:grid-cols-6">
                                <div class="md:col-span-3">
                                    <label for="full_name">First Name</label>
                                    {{user_fm.first_name| attr:'placeholder:First Name' |add_class:'w-full h-10 px-4 mt-1 border rounded bg-gray-50 focus:outline-none'}}
                                    <p class="text-red-500 text-xs">{{user_fm.first_name.errors|striptags}}</p>
                                </div>
                                <div class="md:col-span-3">
                                    <label for="full_name">Last Name</label>
                                    {{user_fm.last_name| attr:'placeholder:Last Name' |add_class:'w-full h-10 px-4 mt-1 border rounded bg-gray-50 focus:outline-none'}}
                                    <p class="text-red-500 text-xs italic">{{user_fm.last_name.errors|striptags}}</p>
                                </div>
                                <div class="md:col-span-6">
                                    <label for="full_name">User Name</label>
                                    {{user_fm.username| attr:'placeholder:Username' |add_class:'w-full h-10 px-4 mt-1 border rounded bg-gray-50 focus:outline-none'}}
                                    <p class="text-red-500 text-xs">{{user_fm.username.errors|striptags}}</p>
                                </div>
                                <div class="md:col-span-6">
                                    <label for="email">Email Address</label>
                                    {{user_fm.email| attr:'placeholder:Email' |add_class:'w-full h-10 px-4 mt-1 border rounded bg-gray-50 focus:outline-none'}}
                                    {%if messages%}
                                        {%for message in messages %}
                                            {% if message.tags == 'warning' %}
                                            <p class="text-red-500 text-xs ">{{message}}</p>
                                            {%endif%}
                                        {%endfor%}
                                    {%endif%}
                                    <p class="text-red-500 text-xs">{{user_fm.email.errors|striptags}}</p>

                                </div>

                                <div class="md:col-span-3">
                                    <label for="" class="block">Password</label>
                                    {{user_fm.password1| attr:'placeholder:Password' |add_class:'w-full h-10 px-4 mt-1 border rounded bg-gray-50 focus:outline-none'}}
                                    <p class="text-red-500 text-xs ">{{user_fm.password1.errors|striptags}}</p>
                                </div>
                                <div class="md:col-span-3 ">
                                    <label for="" class="block">Confirm Password</label>
                                    {{user_fm.password2| attr:'placeholder:Confirm Password' |add_class:'w-full h-10 px-4 mt-1 border rounded bg-gray-50 focus:outline-none'}}
                                    <p class="text-red-500 text-xs ">{{user_fm.password2.errors|striptags}}</p>
                                </div>
                                <div class="md:col-span-6 ">
                                    <label>Company Name</label>
                                    {{profileForm.company_name| attr:'placeholder:Company Name' |add_class:'w-full h-10 px-4 mt-1 border rounded bg-gray-50 focus:outline-none'}}
                                    {%if messages%}
                                        {%for message in messages %}
                                            {%if message.tags == 'info'%}
                                                <p class="text-red-500 text-xs ">{{message}}</p>
                                            {%endif%}
                                        {%endfor%}
                                    {%endif%}
                                    <p class="text-red-500 text-xs ">{{profileForm.company_name.errors|striptags}}</p>
                                </div>
                                
                                <div class="md:col-span-2 mt-3">
                                    <label for="" class="mr-1">State</label>
                                    {{profileForm.state| attr:'placeholder:Company Name' |add_class:'rounded border-2 border-gray-200 px-4 py-1 focus:outline-none bg-gray-50'}}
                                    <p class="text-red-500 text-xs ">{{profileForm.state.errors|striptags}}</p>
                                </div>
                                <div class="md:col-span-2 mt-3">
                                    <label for="" class="mr-1">City</label>
                                    {{profileForm.city| attr:'placeholder:Company Name' |add_class:'rounded border-2 border-gray-200 px-4 py-1 focus:outline-none bg-gray-50'}}
                                    <p class="text-red-500 text-xs ">{{profileForm.city.errors|striptags}}</p>
                                </div>
                                <div class="md:col-span-2 mt-3">
                                    <label for="" class="mr-1">Area</label>
                                    {{profileForm.area| attr:'placeholder:Company Name' |add_class:'rounded border-2 border-gray-200 px-4 py-1 focus:outline-none bg-gray-50'}}
                                    <p class="text-red-500 text-xs ">{{profileForm.area.errors|striptags}}</p>
                                </div>

                                <div class="md:col-span-6 mt-2">
                                    
                                    <label for="" class="">Address</label>
                                    {{profileForm.company_address| attr:'placeholder:Company Address' |add_class:'w-full px-3 pt-2 h-20 resize-none mt-1 border rounded bg-gray-50 focus:outline-none'}}
                                    <p class="text-red-500 text-xs ">{{profileForm.company_address.errors|striptags}}</p>
                                </div>

                                
                                <div class="mt-2" >
                                    <a href="{%url 'signin'%}"
                                        class="text-sm text-blue-700 hover:underline dark:text-blue-500 ">Already User</a>
                                </div>
                            </div>
                        </div>

                        <div class="text-right md:col-span-5 mt-2">
                            <div class="inline-flex items-end">
                                <button class="px-4 py-2 font-bold text-white bg-gray-600 rounded hover:bg-gray-500" type="submit">Submit</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
    $("#id_state").change(function () {
        var url = $("#personForm").attr("data-cities-url");  // get the url of the `load_cities` view
        var stateId = $(this).val();  // get the selected country ID from the HTML input
        
        $.ajax({                       // initialize an AJAX request
        url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
            'state': stateId       // add the country id to the GET parameters
        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
            
            $("#id_city").html(data);  // replace the contents of the city input with the data that came from the server
        }
    });
    
});
    $("#id_city").change(function () {
        var url = $("#personForm").attr("data-area-url");  // get the url of the `load_cities` view
        var cityId = $(this).val();  // get the selected country ID from the HTML input
        $.ajax({                       // initialize an AJAX request
        url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
            'city': cityId       // add the country id to the GET parameters
        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
            
            console.log(data)
            $("#id_area").html(data);  // replace the contents of the city input with the data that came from the server
        }
        });

    });
    </script>
</body>